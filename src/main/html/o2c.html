<script>
    var qp = null;
    if(window.location.hash) {
        qp = location.hash.substring(1);
    }
    else {
        qp = location.search.substring(1);
    }
    qp = qp ? JSON.parse('{"' + qp.replace(/&/g, '","').replace(/=/g,'":"') + '"}',
            function(key, value) {
                return key===""?value:decodeURIComponent(value) }
    ):{}

    try {
        if (window.opener.swaggerUi.tokenUrl)
            window.opener.processOAuthCode(qp);
        else
            window.opener.onOAuthComplete(qp);

        //window.close();
    } catch (e) {
        if ( window.location.hostname !== 'localhost' ) {
            var st =
                    window.location.protocol
                    + '//localhost:'
                    + (window.location.port || '80')
                    + window.location.pathname
                    + window.location.search ;
            //window.location =st ;
            console.log ("window.location =" + st) ;
        }
    }

</script>